<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrevista IA - Respostas Inteligentes para Entrevistas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .animate-spin { animation: spin 1s linear infinite; }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-white to-purple-50 min-h-screen">
    <div id="app"></div>

    <script>
        const { useState, useEffect, createElement: h } = React;

        function EntrevistaIA() {
            const [stage, setStage] = useState('onboarding');
            const [resume, setResume] = useState('');
            const [jobDescription, setJobDescription] = useState('');
            const [question, setQuestion] = useState('');
            const [isRecording, setIsRecording] = useState(false);
            const [isProcessing, setIsProcessing] = useState(false);
            const [currentAnswer, setCurrentAnswer] = useState(null);
            const [conversationHistory, setConversationHistory] = useState([]);
            const [sessionId, setSessionId] = useState(null);
            const [progress, setProgress] = useState(0);
            const [inputMode, setInputMode] = useState('text');
            const [analysisData, setAnalysisData] = useState(null);

            const processInitialData = async () => {
                setStage('processing');
                setProgress(0);
                
                const steps = [
                    { delay: 500, progress: 20 },
                    { delay: 800, progress: 40 },
                    { delay: 700, progress: 60 },
                    { delay: 600, progress: 80 },
                    { delay: 500, progress: 100 }
                ];

                for (const step of steps) {
                    await new Promise(resolve => setTimeout(resolve, step.delay));
                    setProgress(step.progress);
                }

                const id = Math.random().toString(36).substring(2, 14);
                setSessionId(id);

                setAnalysisData({
                    matchScore: 87,
                    keySkills: ['Liderança', 'Comunicação', 'Gestão de Projetos'],
                    strongPoints: ['Experiência relevante', 'Formação alinhada']
                });

                setTimeout(() => setStage('interview'), 500);
            };

            const generateAnswer = async (userQuestion) => {
                setIsProcessing(true);
                
                await new Promise(resolve => setTimeout(resolve, 2000));

                const answers = {
                    'fortes|forte|qualidades|pontos fortes': {
                        text: 'Meus principais pontos fortes são liderança de equipes multidisciplinares, capacidade analítica para resolver problemas complexos e excelente comunicação interpessoal. Durante minha experiência anterior, liderei um projeto que aumentou a eficiência operacional em 35%, demonstrando minha habilidade de gestão e orientação para resultados. Além disso, sou reconhecido pela capacidade de adaptar-me rapidamente a novos ambientes e tecnologias.',
                        bullets: [
                            'Liderança de equipes com resultados mensuráveis (+35% eficiência)',
                            'Forte capacidade analítica e resolução de problemas',
                            'Excelente comunicação e adaptabilidade'
                        ]
                    },
                    'contratar|contratação|escolher você': {
                        text: 'Você deve me contratar porque combino experiência técnica sólida com habilidades de liderança comprovadas, alinhadas perfeitamente aos requisitos desta vaga. Meu histórico demonstra resultados consistentes: no último projeto, implementei uma solução que gerou economia de R$ 200 mil anuais. Além disso, minha paixão pelo setor e minha capacidade de trabalhar colaborativamente me tornam um profissional que agrega valor desde o primeiro dia.',
                        bullets: [
                            'Experiência técnica + habilidades de liderança alinhadas à vaga',
                            'Histórico de resultados concretos (R$ 200k economia)',
                            'Capacidade de gerar valor imediato para a empresa'
                        ]
                    },
                    'fraco|fracos|fraqueza|melhorar': {
                        text: 'Um aspecto que venho desenvolvendo ativamente é delegar tarefas de forma mais estratégica. No passado, tinha tendência a assumir muitas responsabilidades, mas percebi que isso limitava o crescimento da equipe. Implementei um sistema de mentoria que me ajudou a equilibrar melhor minha carga de trabalho enquanto desenvolvo os talentos do time. Hoje, vejo essa transformação como um ponto de crescimento profissional significativo.',
                        bullets: [
                            'Trabalho ativo no desenvolvimento da delegação estratégica',
                            'Implementei sistema de mentoria para equilibrar responsabilidades',
                            'Transformei limitação em oportunidade de crescimento da equipe'
                        ]
                    },
                    'default': {
                        text: 'Essa é uma excelente pergunta. Com base na minha experiência e nas competências valorizadas por esta vaga, acredito que posso contribuir significativamente para os objetivos da empresa. Meu histórico demonstra consistência em entregar resultados, trabalhar colaborativamente e buscar sempre a excelência. Estou genuinamente entusiasmado com a possibilidade de aplicar minhas habilidades neste desafio.',
                        bullets: [
                            'Experiência alinhada aos requisitos da vaga',
                            'Histórico consistente de resultados',
                            'Entusiasmo genuíno pela oportunidade'
                        ]
                    }
                };

                let selectedAnswer = answers.default;
                for (const [pattern, answer] of Object.entries(answers)) {
                    if (pattern !== 'default') {
                        const regex = new RegExp(pattern, 'i');
                        if (regex.test(userQuestion)) {
                            selectedAnswer = answer;
                            break;
                        }
                    }
                }

                const newAnswer = {
                    question: userQuestion,
                    answer: selectedAnswer.text,
                    bullets: selectedAnswer.bullets,
                    timestamp: new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })
                };

                setCurrentAnswer(newAnswer);
                setConversationHistory(prev => [...prev, newAnswer]);
                setIsProcessing(false);
                setQuestion('');
            };

            const toggleRecording = () => {
                if (!isRecording) {
                    setIsRecording(true);
                    setTimeout(() => {
                        setIsRecording(false);
                        setQuestion('Quais são seus principais pontos fortes?');
                    }, 2000);
                } else {
                    setIsRecording(false);
                }
            };

            // ONBOARDING
            if (stage === 'onboarding') {
                return h('div', { className: 'container mx-auto px-4 py-8 max-w-4xl' },
                    h('div', { className: 'text-center mb-12' },
                        h('div', { className: 'inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl mb-4' },
                            h('span', { className: 'text-4xl' }, '✨')
                        ),
                        h('h1', { className: 'text-4xl font-bold text-gray-900 mb-3' }, 'Entrevista IA'),
                        h('p', { className: 'text-lg text-gray-600' }, 'Respostas inteligentes em tempo real para sua entrevista')
                    ),
                    h('div', { className: 'bg-white rounded-2xl shadow-xl p-8 space-y-6' },
                        h('div', { className: 'flex items-center space-x-3 pb-4 border-b' },
                            h('div', { className: 'w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center' },
                                h('span', null, '📄')
                            ),
                            h('div', null,
                                h('h2', { className: 'text-xl font-semibold text-gray-900' }, 'Configure sua sessão'),
                                h('p', { className: 'text-sm text-gray-500' }, 'Insira seu currículo e a descrição da vaga')
                            )
                        ),
                        h('div', null,
                            h('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Seu Currículo'),
                            h('textarea', {
                                className: 'w-full h-48 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none',
                                placeholder: 'Cole aqui seu currículo completo ou as informações principais...',
                                value: resume,
                                onChange: (e) => setResume(e.target.value)
                            })
                        ),
                        h('div', null,
                            h('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Descrição da Vaga'),
                            h('textarea', {
                                className: 'w-full h-48 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none',
                                placeholder: 'Cole aqui a descrição completa da vaga...',
                                value: jobDescription,
                                onChange: (e) => setJobDescription(e.target.value)
                            })
                        ),
                        h('button', {
                            onClick: processInitialData,
                            disabled: !resume.trim() || !jobDescription.trim(),
                            className: 'w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-4 rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed'
                        }, '✨ Iniciar Análise Inteligente')
                    )
                );
            }

            // PROCESSING
            if (stage === 'processing') {
                return h('div', { className: 'min-h-screen flex items-center justify-center' },
                    h('div', { className: 'bg-white rounded-2xl shadow-xl p-12 max-w-md w-full mx-4' },
                        h('div', { className: 'text-center' },
                            h('div', { className: 'inline-flex items-center justify-center w-20 h-20 bg-indigo-100 rounded-full mb-6' },
                                h('div', { className: 'w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin' })
                            ),
                            h('h2', { className: 'text-2xl font-bold text-gray-900 mb-2' }, 'Analisando Dados'),
                            h('p', { className: 'text-gray-600 mb-6' }, 'Processando seu perfil e a vaga...'),
                            h('div', { className: 'w-full bg-gray-200 rounded-full h-3 mb-4' },
                                h('div', {
                                    className: 'bg-gradient-to-r from-indigo-600 to-purple-600 h-3 rounded-full transition-all duration-300',
                                    style: { width: `${progress}%` }
                                })
                            ),
                            h('p', { className: 'text-sm font-medium text-indigo-600' }, `${progress}% completo`)
                        )
                    )
                );
            }

            // HISTORY
            if (stage === 'history') {
                return h('div', { className: 'container mx-auto px-4 py-8 max-w-4xl' },
                    h('div', { className: 'bg-white rounded-2xl shadow-xl p-8' },
                        h('div', { className: 'flex items-center justify-between mb-6' },
                            h('h2', { className: 'text-2xl font-bold text-gray-900' }, '📜 Histórico da Sessão'),
                            h('button', {
                                onClick: () => setStage('interview'),
                                className: 'text-indigo-600 hover:text-indigo-700'
                            }, '← Voltar')
                        ),
                        conversationHistory.length === 0 
                            ? h('div', { className: 'text-center py-12' },
                                h('p', { className: 'text-gray-500' }, 'Nenhuma pergunta respondida ainda')
                            )
                            : h('div', { className: 'space-y-6' },
                                conversationHistory.map((item, idx) =>
                                    h('div', { key: idx, className: 'border-l-4 border-indigo-600 pl-4 py-2' },
                                        h('div', { className: 'flex items-center justify-between mb-2' },
                                            h('p', { className: 'font-semibold text-gray-900' }, item.question),
                                            h('span', { className: 'text-xs text-gray-500' }, item.timestamp)
                                        ),
                                        h('p', { className: 'text-gray-700 mb-3' }, item.answer),
                                        h('div', { className: 'bg-indigo-50 rounded-lg p-3' },
                                            h('p', { className: 'text-xs font-medium text-indigo-900 mb-2' }, 'Pontos-chave:'),
                                            h('ul', { className: 'space-y-1' },
                                                item.bullets.map((bullet, bidx) =>
                                                    h('li', { key: bidx, className: 'text-sm text-indigo-800' }, `• ${bullet}`)
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                    )
                );
            }

            // INTERVIEW
            return h('div', { className: 'container mx-auto px-4 py-6 max-w-6xl' },
                h('div', { className: 'bg-white rounded-xl shadow-sm p-4 mb-6 flex items-center justify-between' },
                    h('div', { className: 'flex items-center space-x-4' },
                        h('div', { className: 'w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-lg flex items-center justify-center' },
                            h('span', null, '✨')
                        ),
                        h('div', null,
                            h('h1', { className: 'text-lg font-bold text-gray-900' }, 'Entrevista IA'),
                            h('p', { className: 'text-xs text-gray-500' }, `Sessão: ${sessionId}`)
                        )
                    ),
                    h('div', { className: 'flex items-center space-x-3' },
                        h('div', { className: 'flex items-center space-x-2 bg-green-50 px-3 py-1.5 rounded-full' },
                            h('div', { className: 'w-2 h-2 bg-green-500 rounded-full animate-pulse' }),
                            h('span', { className: 'text-xs font-medium text-green-700' }, 'Ativo')
                        ),
                        h('button', {
                            onClick: () => setStage('history'),
                            className: 'p-2 hover:bg-gray-100 rounded-lg'
                        }, '📜')
                    )
                ),
                h('div', { className: 'grid lg:grid-cols-3 gap-6' },
                    h('div', { className: 'lg:col-span-2 space-y-6' },
                        analysisData && h('div', { className: 'bg-white rounded-xl shadow-sm p-6' },
                            h('h3', { className: 'font-semibold text-gray-900 mb-4' }, '✅ Análise Completa'),
                            h('div', { className: 'grid grid-cols-3 gap-4' },
                                h('div', { className: 'text-center' },
                                    h('p', { className: 'text-3xl font-bold text-indigo-600' }, `${analysisData.matchScore}%`),
                                    h('p', { className: 'text-xs text-gray-600' }, 'Compatibilidade')
                                ),
                                h('div', { className: 'col-span-2 space-y-2' },
                                    h('p', { className: 'text-xs font-medium text-gray-700 mb-1' }, 'Competências-chave:'),
                                    h('div', { className: 'flex flex-wrap gap-1' },
                                        analysisData.keySkills.map((skill, idx) =>
                                            h('span', { key: idx, className: 'text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded' }, skill)
                                        )
                                    )
                                )
                            )
                        ),
                        h('div', { className: 'bg-white rounded-xl shadow-lg p-6' },
                            h('div', { className: 'flex items-center justify-between mb-4' },
                                h('h2', { className: 'text-lg font-semibold text-gray-900' }, 'Pergunta do Recrutador'),
                                h('div', { className: 'flex items-center bg-gray-100 rounded-lg p-1' },
                                    h('button', {
                                        onClick: () => setInputMode('text'),
                                        className: `px-3 py-1.5 rounded text-sm font-medium ${inputMode === 'text' ? 'bg-white text-indigo-600 shadow-sm' : 'text-gray-600'}`
                                    }, 'Texto'),
                                    h('button', {
                                        onClick: () => setInputMode('voice'),
                                        className: `px-3 py-1.5 rounded text-sm font-medium ${inputMode === 'voice' ? 'bg-white text-indigo-600 shadow-sm' : 'text-gray-600'}`
                                    }, 'Voz')
                                )
                            ),
                            inputMode === 'text'
                                ? h('div', { className: 'space-y-4' },
                                    h('textarea', {
                                        className: 'w-full h-32 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 resize-none',
                                        placeholder: 'Digite a pergunta que o recrutador fez...',
                                        value: question,
                                        onChange: (e) => setQuestion(e.target.value)
                                    }),
                                    h('button', {
                                        onClick: () => question.trim() && generateAnswer(question),
                                        disabled: !question.trim() || isProcessing,
                                        className: 'w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50'
                                    }, isProcessing ? '⏳ Gerando resposta...' : '📤 Gerar Resposta')
                                )
                                : h('div', { className: 'space-y-4' },
                                    h('div', { className: 'border-2 border-dashed border-gray-300 rounded-lg p-12 text-center' },
                                        h('button', {
                                            onClick: toggleRecording,
                                            className: `mx-auto w-20 h-20 rounded-full flex items-center justify-center text-4xl ${isRecording ? 'bg-red-500 animate-pulse' : 'bg-indigo-600'}`
                                        }, isRecording ? '🔴' : '🎤'),
                                        h('p', { className: 'mt-4 text-sm font-medium text-gray-700' }, 
                                            isRecording ? 'Gravando... Clique para parar' : 'Clique para gravar'
                                        ),
                                        question && h('p', { className: 'mt-2 text-sm text-indigo-600' }, `"${question}"`)
                                    ),
                                    question && h('button', {
                                        onClick: () => generateAnswer(question),
                                        disabled: isProcessing,
                                        className: 'w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50'
                                    }, isProcessing ? '⏳ Gerando resposta...' : '📤 Gerar Resposta')
                                )
                        ),
                        currentAnswer && h('div', { className: 'bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl shadow-lg p-6 border-2 border-indigo-200' },
                            h('div', { className: 'flex items-center justify-between mb-4' },
                                h('h3', { className: 'font-semibold text-gray-900' }, '✨ Sua Resposta'),
                                h('span', { className: 'text-xs text-gray-500' }, currentAnswer.timestamp)
                            ),
                            h('div', { className: 'bg-white rounded-lg p-4 mb-4' },
                                h('p', { className: 'text-gray-800 leading-relaxed' }, currentAnswer.answer)
                            ),
                            h('div', { className: 'bg-indigo-100 rounded-lg p-4' },
                                h('p', { className: 'text-sm font-medium text-indigo-900 mb-2' }, 'Pontos-chave para destacar:'),
                                h('ul', { className: 'space-y-2' },
                                    currentAnswer.bullets.map((bullet, idx) =>
                                        h('li', { key: idx, className: 'text-sm text-indigo-800' }, `✓ ${bullet}`)
                                    )
                                )
                            )
                        )
                    ),
                    h('div', { className: 'space-y-6' },
                        h('div', { className: 'bg-white rounded-xl shadow-sm p-6' },
                            h('h3', { className: 'font-semibold text-gray-900 mb-4' }, 'Estatísticas'),
                            h('div', { className: 'space-y-3' },
                                h('div', { className: 'flex justify-between items-center' },
                                    h('span', { className: 'text-sm text-gray-600' }, 'Perguntas respondidas'),
                                    h('span', { className: 'text-lg font-bold text-indigo-600' }, conversationHistory.length)
                                ),
                                h('div', { className: 'flex justify-between items-center' },
                                    h('span', { className: 'text-sm text-gray-600' }, 'Tempo médio'),
                                    h('span', { className: 'text-lg font-bold text-green-600' }, '2.3s')
                                )
                            )
                        ),
                        h('div', { className: 'bg-white rounded-xl shadow-sm p-6' },
                            h('h3', { className: 'font-semibold text-gray-900 mb-4' }, 'Perguntas Comuns'),
                            h('div', { className: 'space-y-2' },
                                ['Quais são seus pontos fortes?', 'Por que devemos te contratar?', 'Qual sua maior fraqueza?', 'Onde você se vê em 5 anos?'].map((q, idx) =>
                                    h('button', {
                                        key: idx,
                                        onClick: () => setQuestion(q),
                                        className: 'w-full text-left text-sm text-gray-700 hover:bg-indigo-50 p-2 rounded'
                                    }, q)
                                )
                            )
                        ),
                        h('div', { className: 'bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-6 border border-purple-200' },
                            h('h3', { className: 'font-semibold text-gray-900 mb-3' }, '✨ Dica Rápida'),
                            h('p', { className: 'text-sm text-gray-700' }, 
                                'Use a entrada por voz para discretamente capturar perguntas durante entrevistas remotas.'
                            )
                        )
                    )
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('app'));
        root.render(React.createElement(EntrevistaIA));
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</body>
</html>
