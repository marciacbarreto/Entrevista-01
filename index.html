<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entrevista IA - Modo Executivo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</head>

<body class="bg-gradient-to-br from-indigo-50 via-white to-purple-50 min-h-screen flex flex-col items-center justify-center p-4">
  <div id="app" class="w-full max-w-4xl bg-white rounded-2xl shadow-2xl p-8"></div>

  <script>
    const { useState, useEffect, createElement: h } = React;

    // ðŸ” FunÃ§Ã£o para extrair palavras-chave
    function extractKeywords(text) {
      const tools = ["power bi", "excel", "jira", "crm", "salesforce", "hubspot"];
      const metrics = ["nps", "csat", "ces", "churn", "retenÃ§Ã£o", "expansÃ£o"];
      const roles = ["customer success", "customer experience", "cx", "suporte", "gestÃ£o", "vendas", "b2b"];
      const found = (list) => list.filter(w => text.toLowerCase().includes(w));
      return { tools: found(tools), metrics: found(metrics), roles: found(roles) };
    }

    // ðŸ”  Capitaliza texto
    function capitalize(s) {
      return s.charAt(0).toUpperCase() + s.slice(1);
    }

    // âœ¨ Nova funÃ§Ã£o com IA simulada (sem OpenAI)
    function generateExecutiveAnswer({ question, resume, job }) {
      const rk = extractKeywords(resume);
      const jk = extractKeywords(job);
      const tools = [...new Set([...(jk.tools || []), ...(rk.tools || [])])].slice(0, 3);
      const metrics = [...new Set([...(jk.metrics || []), ...(rk.metrics || [])])].slice(0, 3);
      const roleHint = (jk.roles[0] || rk.roles[0] || "Customer Experience");

      const toolsStr = tools.length ? tools.map(capitalize).join(" e ") : "Power BI e Excel";
      const metricsStr = metrics.length ? metrics.map(s => s.toUpperCase()).join(" e ") : "NPS e CSAT";

      const q = question.toLowerCase();

      if (q.includes("venda") || q.includes("b2b") || q.includes("contas")) {
        return `Sim, tenho experiÃªncia sÃ³lida em vendas consultivas e gestÃ£o de contas B2B.
Durante minha trajetÃ³ria, integrei estratÃ©gias de Customer Success e Ã¡reas comerciais,
criando fluxos de acompanhamento, expansÃ£o e fidelizaÃ§Ã£o de clientes corporativos.
Utilizei ferramentas como ${toolsStr} para anÃ¡lise de performance e identificaÃ§Ã£o de oportunidades de upsell e retenÃ§Ã£o.
AlÃ©m disso, implementei mÃ©tricas como ${metricsStr} para medir satisfaÃ§Ã£o e crescimento de receita recorrente.`;
      }

      if (q.includes("estruturaria") || q.includes("estruturaria a Ã¡rea") || q.includes("estruturaÃ§Ã£o")) {
        return `Eu estruturaria a Ã¡rea com foco em eficiÃªncia operacional e clareza de processos.
Iniciaria com um diagnÃ³stico rÃ¡pido, mapeando fluxos e gargalos, aplicando ferramentas como ${toolsStr} para mensurar resultados.
Definiria metas e entregas semanais alinhadas aos indicadores ${metricsStr}, garantindo agilidade, clareza e integraÃ§Ã£o entre os times.`;
      }

      if (q.includes("lider") || q.includes("gestao") || q.includes("equipe")) {
        return `Minha abordagem de lideranÃ§a Ã© centrada em pessoas e resultados.
Atuo definindo objetivos claros e acompanhando indicadores como ${metricsStr}.
Valorizo autonomia, melhoria contÃ­nua e cultura de dados â€” uso ${toolsStr} para decisÃµes baseadas em fatos e nÃ£o em percepÃ§Ãµes.`;
      }

      return `Na minha Ãºltima experiÃªncia, comecei estruturando a Ã¡rea com foco em eficiÃªncia operacional e experiÃªncia do cliente.
Realizei um diagnÃ³stico dos fluxos de atendimento, identifiquei gargalos e implementei processos padronizados com acompanhamento via ${toolsStr}.
Desenvolvi um modelo de ${capitalize(roleHint)} com metas de ${metricsStr}, alÃ©m de integrar times de Suporte, CX e Produto para garantir uma visÃ£o Ãºnica do cliente.

Para esta oportunidade, aplicaria a mesma metodologia â€” iniciando pelo mapeamento da jornada, definiÃ§Ã£o de KPIs de retenÃ§Ã£o, engajamento e expansÃ£o.
Estabeleceria rituais de melhoria contÃ­nua (reviews semanais e mensais), usaria ${toolsStr} para monitoramento e criaria um playbook de relacionamento alinhado aos objetivos estratÃ©gicos da empresa.`;
    }

    // ðŸ’¼ Componente principal
    function InterviewApp() {
      const [resume, setResume] = useState("");
      const [job, setJob] = useState("");
      const [question, setQuestion] = useState("");
      const [answer, setAnswer] = useState("");
      const [session, setSession] = useState(Date.now());

      // ðŸ”„ Atualiza resposta automaticamente
      useEffect(() => {
        if (question.trim().length > 5 && resume && job) {
          const r = generateExecutiveAnswer({ question, resume, job });
          setAnswer(r);
        } else {
          setAnswer("");
        }
      }, [question, resume, job]);

      // ðŸ§¹ Reset
      const reset = () => {
        setResume("");
        setJob("");
        setQuestion("");
        setAnswer("");
        setSession(Date.now());
      };

      return h("div", { className: "space-y-8" },

        h("h1", { className: "text-3xl font-bold text-indigo-700 flex items-center gap-2" },
          "ðŸŽ¤ Modo Entrevista"
        ),

        h("p", { className: "text-gray-600 mb-4" },
          "Cole seu currÃ­culo e a descriÃ§Ã£o da vaga para gerar respostas personalizadas."
        ),

        // ðŸ§¾ Campos de entrada
        h("textarea", {
          className: "w-full border rounded-xl p-4 h-28 shadow-sm focus:ring-2 focus:ring-indigo-400",
          placeholder: "Cole aqui o currÃ­culo...",
          value: resume,
          onChange: (e) => setResume(e.target.value)
        }),
        h("textarea", {
          className: "w-full border rounded-xl p-4 h-28 shadow-sm focus:ring-2 focus:ring-indigo-400",
          placeholder: "Cole aqui a descriÃ§Ã£o da vaga...",
          value: job,
          onChange: (e) => setJob(e.target.value)
        }),

        // ðŸŽ¤ Pergunta do recrutador
        h("div", { className: "mt-8" },
          h("p", { className: "text-gray-700 mb-2 font-medium" }, "Digite ou fale a pergunta do recrutador:"),
          h("textarea", {
            className: "w-full border rounded-xl p-4 h-24 focus:ring-2 focus:ring-purple-400",
            placeholder: "Ex: Como vocÃª estruturaria a Ã¡rea?",
            value: question,
            onChange: (e) => setQuestion(e.target.value)
          })
        ),

        // âš¡ BotÃµes
        h("div", { className: "flex gap-4 mt-4" },
          h("button", {
            className: "bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold shadow-md",
            onClick: () => setQuestion(""),
          }, "ðŸŽ™ï¸ Gravar pergunta"),
          h("button", {
            className: "bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-semibold shadow-md",
            onClick: () => {
              const r = generateExecutiveAnswer({ question, resume, job });
              setAnswer(r);
            },
          }, "âš¡ Gerar resposta"),
          h("button", {
            className: "ml-auto bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-semibold",
            onClick: reset
          }, "ðŸ†• Nova Vaga / CurrÃ­culo")
        ),

        // ðŸ’¬ Resposta
        answer && h("div", { className: "mt-8 p-6 bg-indigo-50 border border-indigo-100 rounded-xl shadow-inner" },
          h("p", { className: "font-semibold text-indigo-700 mb-2" }, "âœ¨ Resposta sugerida (modelo executivo e natural):"),
          h("p", { className: "text-gray-700 whitespace-pre-line leading-relaxed" }, answer)
        ),

        h("p", { className: "text-sm text-gray-500 mt-6" },
          "ðŸ’¡ Dica rÃ¡pida: use o microfone para capturar perguntas discretamente durante entrevistas online."
        )
      );
    }

    ReactDOM.createRoot(document.getElementById("app")).render(h(InterviewApp));
  </script>
</body>
</html>
